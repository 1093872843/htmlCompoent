宏任务(macro)task主要包含：

> script(整体代码)、setTimeout、setInterval、I/O、UI交互事件、postMessage、MessageChannel、setImmediate(Node.js 环境)

微任务 microtask主要包含：

> Promise.then、MutaionObserver、process.nextTick(Node.js 环境)，

Promise 是立即执行，

async/await 是promise+generator的语法糖。

await实际上是让出线程，将后续任务加到当前微任务队列

浏览器为了能够使得JS内部(macro)task与DOM任务能够有序的执行，**会在一个(macro)task执行结束后，在下一个(macro)task 执行开始前，对页面进行重新渲染**。

![mark](https://camo.githubusercontent.com/6960fe108d5b5064db1751528fc65ed70f08be3f40c25024ceef66370f4ef1b3/68747470733a2f2f692e6c6f6c692e6e65742f323031392f30322f30382f356335643661353238626461662e6a7067)
